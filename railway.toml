# ===========================================
# Horus Backend - Railway Configuration
# ===========================================
# Using Nixpacks for simpler builds

[build]
builder = "nixpacks"
buildCommand = "pnpm --filter @horus/shared build && cd apps/backend && npx prisma generate && pnpm build"
watchPatterns = ["apps/backend/**", "packages/shared/**"]

[deploy]
numReplicas = 1
healthcheckPath = "/api/health"
healthcheckTimeout = 300
startCommand = "cd apps/backend && node dist/index.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
